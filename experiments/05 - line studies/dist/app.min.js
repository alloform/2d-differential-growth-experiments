"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof2(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function r(i,o,s){function a(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return a(i[t][1][e]||e)},n,n.exports,r,i,o,s)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,n){var r=e("./node_modules/point-in-polygon"),e=function(){function n(e,t){_classCallCheck(this,n),this.p5=e,this.polygon=t}return _createClass(n,[{key:"contains",value:function(e){return r(e,this.polygon)}},{key:"draw",value:function(){this.p5.beginShape();for(var e=0;e<this.polygon.length;e++)this.p5.vertex(this.polygon[e][0],this.polygon[e][1]);this.p5.vertex(this.polygon[0][0],this.polygon[0][1]),this.p5.endShape()}}]),n}();t.exports=e},{"./node_modules/point-in-polygon":8}],2:[function(e,t,n){t.exports={MinDistance:20,MaxDistance:30,RepulsionRadius:20,MaxVelocity:.1,AttractionForce:.001,RepulsionForce:500,AlignmentForce:.001,NodeInjectionInterval:100,DrawNodes:!1,TraceMode:!1,InvertedColors:!1,DebugMode:!1,FillMode:!1,DrawHistory:!1,HistoryCaptureInterval:1e3,MaxHistorySize:10,UseBrownianMotion:!0,BrownianMotionRange:.01,ShowBounds:!0}},{}],3:[function(e,t,n){var r=e("./node_modules/webmidi"),e=function e(){_classCallCheck(this,e),r.enable(function(e){e?console.log(e):(this.lpd8=r.getInputByName("Akai LPD8 Wireless"),this.lpd8&&(this.lpd8.addListener("noteon","all",function(e){e=new CustomEvent("noteon",{detail:{note:e.note.number,velocity:e.velocity}});document.dispatchEvent(e)}),this.lpd8.addListener("controlchange","all",function(e){e=new CustomEvent("controlchange",{detail:{controller:e.controller.number,value:e.value}});document.dispatchEvent(e)})))})};t.exports=e},{"./node_modules/webmidi":18}],4:[function(e,t,n){var l=e("./node_modules/vec2"),c=e("./Defaults"),e=function(){_inherits(h,l);var u=_createSuper(h);function h(e,t,n){var r,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:c,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=5<arguments.length?arguments[5]:void 0,a=6<arguments.length?arguments[6]:void 0;return _classCallCheck(this,h),(r=u.call(this,t,n)).p5=e,r.isFixed=o,r.settings=Object.assign({},c,i),r.velocity=0,r.nextPosition=new l(t,n),r.minDistance=s||i.MinDistance,r.repulsionRadius=a||i.RepulsionRadius,r}return _createClass(h,[{key:"iterate",value:function(){this.isFixed||(this.x=this.p5.lerp(this.x,this.nextPosition.x,this.settings.MaxVelocity),this.y=this.p5.lerp(this.y,this.nextPosition.y,this.settings.MaxVelocity))}},{key:"draw",value:function(){this.isFixed?this.p5.ellipse(this.x,this.y,20):this.p5.ellipse(this.x,this.y,5)}}]),h}();t.exports=e},{"./Defaults":2,"./node_modules/vec2":17}],5:[function(e,t,n){var i=e("./node_modules/rbush-knn"),o=e("./Node"),r=e("./Bounds"),l=e("./Defaults"),e=function(){function h(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:l,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{h:0,s:0,b:0,a:255},s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{h:0,s:0,b:0,a:255},a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:{h:0,s:0,b:255,a:255},u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:{h:0,s:0,b:255,a:255};_classCallCheck(this,h),this.p5=e,this.nodes=t,this.isClosed=r,this.settings=Object.assign({},l,n),this.bounds=i,this.injectionMode="RANDOM",this.lastNodeInjectTime=0,this.nodeHistory=[],this.drawNodes=this.settings.DrawNodes,this.invertedColors=this.settings.InvertedColors,this.traceMode=this.settings.TraceMode,this.debugMode=this.settings.DebugMode,this.fillMode=this.settings.FillMode,this.useBrownianMotion=this.settings.UseBrownianMotion,this.drawHistory=this.settings.DrawHistory,this.showBounds=this.settings.ShowBounds,this.fillColor=o,this.strokeColor=s,this.invertedFillColor=a,this.invertedStrokeColor=u,this.currentFillColor=this.fillColor,this.currentStrokeColor=this.strokeColor,this.invertedColors&&(this.currentFillColor=this.invertedFillColor,this.currentStrokeColor=this.invertedStrokeColor)}return _createClass(h,[{key:"iterate",value:function(e){var t=_createForOfIteratorHelper(this.nodes.entries());try{for(t.s();!(r=t.n()).done;){var n=_slicedToArray(r.value,2),r=n[0],n=n[1];this.useBrownianMotion&&this.applyBrownianMotion(r),this.applyAttraction(r),this.applyRepulsion(r,e),this.applyAlignment(r),this.applyBounds(r),n.iterate()}}catch(e){t.e(e)}finally{t.f()}this.splitEdges(),this.pruneNodes(),this.p5.millis()-this.lastNodeInjectTime>=this.settings.NodeInjectionInterval&&(this.injectNode(),this.lastNodeInjectTime=this.p5.millis())}},{key:"applyBrownianMotion",value:function(e){this.nodes[e].x+=this.p5.random(-this.settings.BrownianMotionRange/2,this.settings.BrownianMotionRange/2),this.nodes[e].y+=this.p5.random(-this.settings.BrownianMotionRange/2,this.settings.BrownianMotionRange/2)}},{key:"applyAttraction",value:function(e){var t,n=this.getConnectedNodes(e);null!=n.nextNode&&n.nextNode instanceof o&&!this.nodes[e].isFixed&&(t=this.nodes[e].distance(n.nextNode),Math.min(this.nodes[e].minDistance,n.nextNode.minDistance)<t&&(this.nodes[e].nextPosition.x=this.p5.lerp(this.nodes[e].nextPosition.x,n.nextNode.x,this.settings.AttractionForce),this.nodes[e].nextPosition.y=this.p5.lerp(this.nodes[e].nextPosition.y,n.nextNode.y,this.settings.AttractionForce))),null!=n.previousNode&&n.previousNode instanceof o&&!this.nodes[e].isFixed&&(t=this.nodes[e].distance(n.previousNode),Math.min(this.nodes[e].minDistance,n.previousNode.minDistance)<t&&(this.nodes[e].nextPosition.x=this.p5.lerp(this.nodes[e].nextPosition.x,n.previousNode.x,this.settings.AttractionForce),this.nodes[e].nextPosition.y=this.p5.lerp(this.nodes[e].nextPosition.y,n.previousNode.y,this.settings.AttractionForce)))}},{key:"applyRepulsion",value:function(e,t){var n=_createForOfIteratorHelper(i(t,this.nodes[e].x,this.nodes[e].y,void 0,void 0,this.nodes[e].repulsionRadius*this.nodes[e].repulsionRadius));try{for(n.s();!(r=n.n()).done;){var r=r.value;this.nodes[e].nextPosition.x=this.p5.lerp(this.nodes[e].x,r.x,-this.settings.RepulsionForce),this.nodes[e].nextPosition.y=this.p5.lerp(this.nodes[e].y,r.y,-this.settings.RepulsionForce)}}catch(e){n.e(e)}finally{n.f()}}},{key:"applyAlignment",value:function(e){var t=this.getConnectedNodes(e);null!=t.previousNode&&t.previousNode instanceof o&&null!=t.nextNode&&t.nextNode instanceof o&&!this.nodes[e].isFixed&&(t=this.getMidpointNode(t.previousNode,t.nextNode),this.nodes[e].nextPosition.x=this.p5.lerp(this.nodes[e].nextPosition.x,t.x,this.settings.AlignmentForce),this.nodes[e].nextPosition.y=this.p5.lerp(this.nodes[e].nextPosition.y,t.y,this.settings.AlignmentForce))}},{key:"splitEdges",value:function(){var t=_createForOfIteratorHelper(this.nodes.entries());try{for(t.s();!(r=t.n()).done;){var e=_slicedToArray(r.value,2),n=e[0],r=e[1],e=this.getConnectedNodes(n);null!=e.previousNode&&e.previousNode instanceof o&&r.distance(e.previousNode)>=this.settings.MaxDistance&&(e=this.getMidpointNode(r,e.previousNode),0==n?this.nodes.splice(this.nodes.length,0,e):this.nodes.splice(n,0,e))}}catch(e){t.e(e)}finally{t.f()}}},{key:"pruneNodes",value:function(){var t=_createForOfIteratorHelper(this.nodes.entries());try{for(t.s();!(r=t.n()).done;){var e=_slicedToArray(r.value,2),n=e[0],r=e[1],e=this.getConnectedNodes(n);null!=e.previousNode&&e.previousNode instanceof o&&r.distance(e.previousNode)<this.settings.MinDistance&&(0==n?this.nodes[this.nodes.length-1].isFixed||this.nodes.splice(this.nodes.length-1,1):this.nodes[n-1].isFixed||this.nodes.splice(n-1,1))}}catch(e){t.e(e)}finally{t.f()}}},{key:"injectNode",value:function(){switch(this.injectionMode){case"RANDOM":this.injectRandomNode();break;case"CURVATURE":this.injectNodeByCurvature()}}},{key:"injectRandomNode",value:function(){var e=parseInt(this.p5.random(1,this.nodes.length)),t=this.getConnectedNodes(e);null!=t.previousNode&&t.previousNode instanceof o&&null!=t.nextNode&&t.nextNode instanceof o&&this.nodes[e].distance(t.previousNode)>this.settings.MinDistance&&(t=this.getMidpointNode(this.nodes[e],t.previousNode),this.nodes.splice(e,0,t))}},{key:"injectNodeByCurvature",value:function(){var t=_createForOfIteratorHelper(this.nodes.entries());try{for(t.s();!(e=t.n()).done;){var e,n=_slicedToArray(e.value,2),r=n[0],i=n[1],o=this.getConnectedNodes(r);null!=o.previousNode&&null!=o.nextNode&&(e=o.nextNode.y-o.previousNode.y,n=o.nextNode.x-o.previousNode.x,20<Math.round(Math.abs(Math.atan(e/n)))&&(n=this.getMidpointNode(i,o.previousNode),o=this.getMidpointNode(i,o.nextNode),0==r?(this.nodes.splice(this.nodes.length-1,0,n),this.nodes.splice(0,0,o)):this.nodes.splice(r,1,n,o)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"applyBounds",value:function(e){null!=this.bounds&&this.bounds instanceof r&&!this.bounds.contains([this.nodes[e].x,this.nodes[e].y])&&(this.nodes[e].isFixed=!0)}},{key:"getConnectedNodes",value:function(e){var t,n;return 0==e&&this.isClosed?t=this.nodes[this.nodes.length-1]:1<=e&&(t=this.nodes[e-1]),e==this.nodes.length-1&&this.isClosed?n=this.nodes[0]:e<=this.nodes.length-1&&(n=this.nodes[e+1]),{previousNode:t,nextNode:n}}},{key:"getMidpointNode",value:function(e,t,n){n=2<arguments.length&&void 0!==n&&n;return new o(this.p5,(e.x+t.x)/2,(e.y+t.y)/2,this.settings,n)}},{key:"draw",value:function(){this.drawHistory&&this.drawPreviousEdges(),this.showBounds&&null!=this.bounds&&this.bounds instanceof r&&this.drawBounds(),this.fillMode&&this.isClosed?this.p5.fill(this.currentFillColor.h,this.currentFillColor.s,this.currentFillColor.b,this.currentFillColor.a):this.p5.noFill(),this.p5.stroke(this.currentStrokeColor.h,this.currentStrokeColor.s,this.currentStrokeColor.b,this.currentStrokeColor.a),this.drawCurrentEdges(),this.drawNodes&&this.drawCurrentNodes()}},{key:"drawCurrentEdges",value:function(){this.drawEdges(this.nodes)}},{key:"drawPreviousEdges",value:function(){var t=_createForOfIteratorHelper(this.nodeHistory.entries());try{for(t.s();!(n=t.n()).done;){var e=_slicedToArray(n.value,2),n=e[0],e=e[1];this.p5.stroke(this.currentStrokeColor.h,this.currentStrokeColor.s,this.currentStrokeColor.b,30*n),this.drawEdges(e)}}catch(e){t.e(e)}finally{t.f()}}},{key:"drawEdges",value:function(e){this.debugMode||this.p5.beginShape();for(var t=0;t<e.length;t++)this.debugMode?0<t&&(this.traceMode?this.p5.stroke(this.p5.map(t,0,e.length-1,0,255,!0),255,255,2):this.p5.stroke(this.p5.map(t,0,e.length-1,0,255,!0),255,255,255),this.p5.line(e[t-1].x,e[t-1].y,e[t].x,e[t].y)):this.p5.vertex(e[t].x,e[t].y);this.isClosed&&(this.debugMode?this.p5.line(e[e.length-1].x,e[e.length-1].y,e[0].x,e[0].y):this.p5.vertex(e[0].x,e[0].y)),this.debugMode||this.p5.endShape()}},{key:"drawCurrentNodes",value:function(){this.p5.noStroke(),this.invertedColors?this.p5.fill(255):this.p5.fill(0);var t=_createForOfIteratorHelper(this.nodes.entries());try{for(t.s();!(n=t.n()).done;){var e=_slicedToArray(n.value,2),n=e[0],e=e[1];this.debugMode&&this.p5.fill(this.p5.map(n,0,this.nodes.length-1,0,255,!0),255,255,255),e.draw()}}catch(e){t.e(e)}finally{t.f()}}},{key:"drawBounds",value:function(){this.invertedColors?this.p5.stroke(100):this.p5.stroke(200),this.p5.noFill(),this.bounds.draw()}},{key:"addToHistory",value:function(){this.nodeHistory.length==this.settings.MaxHistorySize&&this.nodeHistory.shift(),this.nodeHistory.push(Object.assign([],JSON.parse(JSON.stringify(this.nodes))))}},{key:"moveTo",value:function(e,t){var n=_createForOfIteratorHelper(this.nodes);try{for(n.s();!(r=n.n()).done;){var r=r.value;r.x+=e,r.y+=t}}catch(e){n.e(e)}finally{n.f()}}},{key:"scale",value:function(e){var t=_createForOfIteratorHelper(this.nodes);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.x*=e,n.y*=e}}catch(e){t.e(e)}finally{t.f()}}},{key:"addNode",value:function(e){this.nodes.push(e)}},{key:"toArray",value:function(){var e=[],t=_createForOfIteratorHelper(this.nodes);try{for(t.s();!(n=t.n()).done;){var n=n.value;e.push([n.x,n.y])}}catch(e){t.e(e)}finally{t.f()}return e}},{key:"getTraceMode",value:function(){return this.traceMode}},{key:"getInvertedColors",value:function(){return this.invertedColors}},{key:"setMinDistance",value:function(e){this.settings.MinDistance=e;var t,n=_createForOfIteratorHelper(this.nodes);try{for(n.s();!(t=n.n()).done;){t.value.minDistance=e}}catch(e){n.e(e)}finally{n.f()}}},{key:"setMaxDistance",value:function(e){this.settings.MaxDistance=e;var t,n=_createForOfIteratorHelper(this.nodes);try{for(n.s();!(t=n.n()).done;){t.value.maxDistance=e}}catch(e){n.e(e)}finally{n.f()}}},{key:"setRepulsionRadius",value:function(e){this.settings.RepulsionRadius=e;var t,n=_createForOfIteratorHelper(this.nodes);try{for(n.s();!(t=n.n()).done;){t.value.repulsionRadius=e}}catch(e){n.e(e)}finally{n.f()}}},{key:"setTraceMode",value:function(e){this.traceMode=e,this.traceMode,this.currentFillColor.a=255,this.currentStrokeColor.a=255}},{key:"setInvertedColors",value:function(e){this.invertedColors=e,this.invertedColors?(this.currentFillColor=this.invertedFillColor,this.currentStrokeColor=this.invertedStrokeColor):(this.currentFillColor=this.fillColor,this.currentStrokeColor=this.strokeColor),this.setTraceMode(this.traceMode)}},{key:"setBounds",value:function(e){this.bounds=e}},{key:"toggleTraceMode",value:function(){this.setTraceMode(!this.getTraceMode())}},{key:"toggleInvertedColors",value:function(){this.setInvertedColors(!this.getInvertedColors())}}]),h}();t.exports=e},{"./Bounds":1,"./Defaults":2,"./Node":4,"./node_modules/rbush-knn":10}],6:[function(e,t,n){var o=e("./node_modules/rbush"),a=e("./node_modules/svg-points/").toPath,u=e("./node_modules/file-saver").saveAs,s=e("./Defaults"),e=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];_classCallCheck(this,i),this.p5=e,this.paths=n,this.paused=!1,this.settings=Object.assign({},s,t),this.traceMode=this.settings.TraceMode,this.drawNodes=this.settings.DrawNodes,this.debugMode=this.settings.DebugMode,this.invertedColors=this.settings.InvertedColors,this.fillMode=this.settings.FillMode,this.drawHistory=this.settings.DrawHistory,this.useBrownianMotion=this.settings.UseBrownianMotion,this.showBounds=this.settings.ShowBounds,this.tree=o(9,[".x",".y",".x",".y"]),this.buildTree();var r=this;setInterval(function(){r.addToHistory()},this.settings.HistoryCaptureInterval)}return _createClass(i,[{key:"iterate",value:function(){if(this.prunePaths(),this.buildTree(),null!=this.paths&&this.paths instanceof Array&&0<this.paths.length&&!this.paused){var e,t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(e=t.n()).done;){e.value.iterate(this.tree)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"draw",value:function(){this.traceMode||this.drawBackground();var e,t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(e=t.n()).done;){e.value.draw()}}catch(e){t.e(e)}finally{t.f()}}},{key:"drawBackground",value:function(){this.invertedColors?this.p5.background(0):this.p5.background(255)}},{key:"buildTree",value:function(){this.tree.clear();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(e=t.n()).done;){var e=e.value;this.tree.load(e.nodes)}}catch(e){t.e(e)}finally{t.f()}}},{key:"addPath",value:function(e){e.drawNodes=this.drawNodes,e.debugMode=this.debugMode,e.fillMode=this.fillMode,e.useBrownianMotion=this.useBrownianMotion,e.setInvertedColors(this.invertedColors),e.setTraceMode(this.traceMode),this.paths.push(e)}},{key:"addPaths",value:function(e){var t=_createForOfIteratorHelper(e);try{for(t.s();!(n=t.n()).done;){var n=n.value;this.addPath(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"addToHistory",value:function(){if(!this.paused){var e,t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(e=t.n()).done;){e.value.addToHistory()}}catch(e){t.e(e)}finally{t.f()}}}},{key:"prunePaths",value:function(){for(var e=0;e<this.paths.length;e++)this.paths[e].nodes.length<=1&&this.paths.splice(e,1)}},{key:"export",value:function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.setAttribute("viewBox","0 0 "+window.innerWidth+" "+window.innerHeight);var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.drawHistory){var i=_createForOfIteratorHelper(r.nodeHistory);try{for(i.s();!(o=i.n()).done;){var o=o.value;e.appendChild(this.createPathElFromNodes(o,r.isClosed))}}catch(e){i.e(e)}finally{i.f()}}e.appendChild(this.createPathElFromNodes(r.nodes),r.isClosed)}}catch(e){n.e(e)}finally{n.f()}var s=(new XMLSerializer).serializeToString(e),s=new Blob(['<?xml version="1.0" encoding="UTF-8" standalone="no"?>',s],{type:"image/svg+xml;"});u(s,"differential-growth-"+Date.now()+".svg")}},{key:"createPathElFromNodes",value:function(e,t){var n="",r=_createForOfIteratorHelper(e.entries());try{for(r.s();!(o=r.n()).done;){var i=_slicedToArray(o.value,2),o=i[0],i=i[1];n+=i.x+","+i.y,o<e.length-1&&(n+=" ")}}catch(e){r.e(e)}finally{r.f()}var s=a({type:"polyline",points:n});t&&(s+=" Z");t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",s),t.setAttribute("style","fill: none; stroke: black; stroke-width: 1"),t}},{key:"clearPaths",value:function(){this.paths=[]}},{key:"pause",value:function(){this.paused=!0}},{key:"unpause",value:function(){this.paused=!1}},{key:"getDrawNodes",value:function(){return this.drawNodes}},{key:"getDebugMode",value:function(){return this.debugMode}},{key:"getFillMode",value:function(){return this.fillMode}},{key:"getDrawHistory",value:function(){return this.drawHistory}},{key:"getDrawBounds",value:function(){return this.showBounds}},{key:"setMinDistance",value:function(e){this.settings.MinDistance=e;var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.setMinDistance(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setMaxDistance",value:function(e){this.settings.MaxDistance=e;var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.setMaxDistance(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setRepulsionRadius",value:function(e){this.settings.RepulsionRadius=e;var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.setRepulsionRadius(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setAttractionForce",value:function(e){this.settings.AttractionForce=e;var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.setAttractionForce(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setRepulsionForce",value:function(e){this.settings.RepulsionForce=e;var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.setRepulsionForce(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setAlignmentForce",value:function(e){this.settings.AlignmentForce=e;var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.setAlignmentForce(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setDrawNodes",value:function(e){this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.drawNodes=e,n.draw()}}catch(e){t.e(e)}finally{t.f()}this.drawNodes=e,this.settings.DrawNodes=e}},{key:"setDebugMode",value:function(e){this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.debugMode=e,n.draw()}}catch(e){t.e(e)}finally{t.f()}this.debugMode=e,this.settings.DebugMode=e}},{key:"setFillMode",value:function(e){this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.fillMode=e,n.draw()}}catch(e){t.e(e)}finally{t.f()}this.fillMode=e,this.settings.FillMode=e}},{key:"setDrawHistory",value:function(e){this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.drawHistory=e,n.draw()}}catch(e){t.e(e)}finally{t.f()}this.drawHistory=e,this.settings.DrawHistory=e}},{key:"setTraceMode",value:function(e){this.traceMode=e,this.settings.TraceMode=e,this.drawBackground();var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.traceMode=e}}catch(e){n.e(e)}finally{n.f()}}},{key:"setInvertedColors",value:function(e){this.invertedColors=e,this.settings.InvertedColors=e,this.drawBackground();var t,n=_createForOfIteratorHelper(this.paths);try{for(n.s();!(t=n.n()).done;){t.value.invertedColors=e}}catch(e){n.e(e)}finally{n.f()}}},{key:"setDrawBounds",value:function(e){this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.showBounds=e,n.draw()}}catch(e){t.e(e)}finally{t.f()}this.showBounds=e}},{key:"toggleDrawNodes",value:function(){this.setDrawNodes(!this.getDrawNodes())}},{key:"toggleTraceMode",value:function(){this.traceMode=!this.traceMode,this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(e=t.n()).done;){var e=e.value;e.toggleTraceMode(),e.draw()}}catch(e){t.e(e)}finally{t.f()}}},{key:"toggleInvertedColors",value:function(){this.invertedColors=!this.invertedColors,this.drawBackground();var t=_createForOfIteratorHelper(this.paths);try{for(t.s();!(e=t.n()).done;){var e=e.value;e.toggleInvertedColors(),e.draw()}}catch(e){t.e(e)}finally{t.f()}}},{key:"toggleDebugMode",value:function(){this.setDebugMode(!this.getDebugMode())}},{key:"toggleFillMode",value:function(){this.setFillMode(!this.getFillMode())}},{key:"toggleDrawHistory",value:function(){this.setDrawHistory(!this.getDrawHistory())}},{key:"toggleDrawBounds",value:function(){this.setDrawBounds(!this.getDrawBounds())}},{key:"togglePause",value:function(){this.paused?this.unpause():this.pause()}}]),i}();t.exports=e},{"./Defaults":2,"./node_modules/file-saver":7,"./node_modules/rbush":11,"./node_modules/svg-points/":12}],7:[function(e,r,i){(function(e){var t,n;t=this,n=function(){function u(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function s(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&t.status<=299}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var h="object"==("undefined"==typeof window?"undefined":_typeof2(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":_typeof2(self))&&self.self===self?self:"object"==_typeof2(e)&&e.global===e?e:void 0,i=h.saveAs||("object"!=("undefined"==typeof window?"undefined":_typeof2(window))||window!==h?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=h.URL||h.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?a(i):s(i.href)?u(e,t,n):a(i,i.target="_blank")):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){a(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){var r,i,o;t=t||e.name||"download","string"!=typeof e?navigator.msSaveOrOpenBlob((i=e,void 0===(o=n)?o={autoBom:!1}:"object"!=_typeof2(o)&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i),t):s(e)?u(e,t,n):((r=document.createElement("a")).href=e,r.target="_blank",setTimeout(function(){a(r)}))}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return u(e,t,n);var i,o,s,t="application/octet-stream"===e.type,n=/constructor/i.test(h.HTMLElement)||h.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);(a||t&&n)&&"object"==("undefined"==typeof FileReader?"undefined":_typeof2(FileReader))?((i=new FileReader).onloadend=function(){var e=i.result,e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;");r?r.location.href=e:location=e,r=null},i.readAsDataURL(e)):(o=h.URL||h.webkitURL,s=o.createObjectURL(e),r?r.location=s:location.href=s,r=null,setTimeout(function(){o.revokeObjectURL(s)},4e4))});h.saveAs=i.saveAs=i,void 0!==r&&(r.exports=i)},"function"==typeof define&&define.amd?define([],n):void 0!==i?n():(n(),t.FileSaver={})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){t.exports=function(e,t){for(var n=e[0],r=e[1],i=!1,o=0,s=t.length-1;o<t.length;s=o++){var a=t[o][0],u=t[o][1],h=t[s][0],l=t[s][1];r<u!=r<l&&n<(h-a)*(r-u)/(l-u)+a&&(i=!i)}return i}},{}],9:[function(e,t,n){var r,i;r=this,i=function(){function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return e<t?-1:t<e?1:0}return function(e,t,n,r,i){!function e(t,n,r,i,o){for(;r<i;){var s,a,u,h,l;600<i-r&&(s=i-r+1,a=n-r+1,h=Math.log(s),u=.5*Math.exp(2*h/3),l=.5*Math.sqrt(h*u*(s-u)/s)*(a-s/2<0?-1:1),h=Math.max(r,Math.floor(n-a*u/s+l)),l=Math.min(i,Math.floor(n+(s-a)*u/s+l)),e(t,n,h,l,o));var c=t[n],d=r,f=i;for(p(t,r,n),0<o(t[i],c)&&p(t,r,i);d<f;){for(p(t,d,f),d++,f--;o(t[d],c)<0;)d++;for(;0<o(t[f],c);)f--}0===o(t[r],c)?p(t,r,f):p(t,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,t,n||0,r||e.length-1,i||o)}},"object"===_typeof2(n)&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):r.quickselect=i()},{}],10:[function(e,t,n){var p=e("tinyqueue");function r(e,t,n,r,i,o){for(var s,a,u,h,l=e.data,c=[],d=e.toBBox,f=new p(null,y);l;){for(s=0;s<l.children.length;s++)a=l.children[s],u=function(e,t,n){e=v(e,n.minX,n.maxX),n=v(t,n.minY,n.maxY);return e*e+n*n}(t,n,l.leaf?d(a):a),(!o||u<=o)&&f.push({node:a,isItem:l.leaf,dist:u});for(;f.length&&f.peek().isItem;)if(h=f.pop().node,i&&!i(h)||c.push(h),r&&c.length===r)return c;l=(l=f.pop())&&l.node}return c}function y(e,t){return e.dist-t.dist}function v(e,t,n){return e<t?t-e:e<=n?0:e-n}t.exports=r,t.exports.default=r},{tinyqueue:16}],11:[function(e,t,n){t.exports=r,t.exports.default=r;var a=e("quickselect");function r(e,t){if(!(this instanceof r))return new r(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function f(e,t){p(e,0,e.children.length,t,e)}function p(e,t,n,r,i){(i=i||v(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=t;s<n;s++)o=e.children[s],l(i,e.leaf?r(o):o);return i}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function o(e,t){return e.minX-t.minX}function s(e,t){return e.minY-t.minY}function y(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function c(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function h(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function v(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,t,n,r,i){for(var o,s=[t,n];s.length;)(n=s.pop())-(t=s.pop())<=r||(o=t+Math.ceil((n-t)/r/2)*r,a(e,o,t,n,i),s.push(t,o,o,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!h(e,t))return n;for(var i,o,s,a,u=[];t;){for(i=0,o=t.children.length;i<o;i++)s=t.children[i],h(e,a=t.leaf?r(s):s)&&(t.leaf?n.push(s):d(e,a)?this._all(s,n):u.push(s));t=u.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!h(e,t))return!1;for(var r,i,o,s,a=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],h(e,s=t.leaf?n(o):o)){if(t.leaf||d(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r,i=this._build(e.slice(),0,e.length-1,0);return this.data.children.length?this.data.height===i.height?this._splitRoot(this.data,i):(this.data.height<i.height&&(r=this.data,this.data=i,i=r),this._insert(i,this.data.height-i.height-1,!0)):this.data=i,this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(e),u=[],h=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=h.pop(),o=!0),s.leaf&&-1!==(i=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}(e,s.children,t)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!d(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),h.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(e){return e},compareMinX:o,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,o=n-t+1,s=this._maxEntries;if(o<=s)return f(i=v(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=v([])).leaf=!1,i.height=r;var a,u,h,l,c=Math.ceil(o/s),d=c*Math.ceil(Math.sqrt(s));for(m(e,t,n,d,this.compareMinX),a=t;a<=n;a+=d)for(m(e,a,h=Math.min(a+d-1,n),c,this.compareMinY),u=a;u<=h;u+=c)l=Math.min(u+c-1,h),i.children.push(this._build(e,u,l,r-1));return f(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,o,s,a,u,h,l,c,d;r.push(t),!t.leaf&&r.length-1!==n;){for(h=l=1/0,i=0,o=t.children.length;i<o;i++)u=y(s=t.children[i]),c=e,d=s,(c=(Math.max(d.maxX,c.maxX)-Math.min(d.minX,c.minX))*(Math.max(d.maxY,c.maxY)-Math.min(d.minY,c.minY))-u)<l?(l=c,h=u<h?u:h,a=s):c===l&&u<h&&(h=u,a=s);t=a||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,n=n?e:r(e),i=[],r=this._chooseSubtree(n,this.data,t,i);for(r.children.push(e),l(r,n);0<=t&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);r=this._chooseSplitIndex(n,i,r),r=v(n.children.splice(r,n.children.length-r));r.height=n.height,r.leaf=n.leaf,f(n,this.toBBox),f(r,this.toBBox),t?e[t-1].children.push(r):this._splitRoot(n,r)},_splitRoot:function(e,t){this.data=v([e,t]),this.data.height=e.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){for(var r,i,o,s,a,u,h,l,c,d=o=1/0,f=t;f<=n-t;f++)r=p(e,0,f,this.toBBox),i=p(e,f,n,this.toBBox),a=r,u=i,c=l=h=void 0,h=Math.max(a.minX,u.minX),l=Math.max(a.minY,u.minY),c=Math.min(a.maxX,u.maxX),u=Math.min(a.maxY,u.maxY),l=Math.max(0,c-h)*Math.max(0,u-l),i=y(r)+y(i),l<d?(d=l,s=f,o=i<o?i:o):l===d&&i<o&&(o=i,s=f);return s},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:o,i=e.leaf?this.compareMinY:s;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);for(var i,o=this.toBBox,s=p(e,0,t,o),a=p(e,n-t,n,o),u=c(s)+c(a),h=t;h<n-t;h++)i=e.children[h],l(s,e.leaf?o(i):i),u+=c(s);for(h=n-t-1;t<=h;h--)i=e.children[h],l(a,e.leaf?o(i):i),u+=c(a);return u},_adjustParentBBoxes:function(e,t,n){for(var r=n;0<=r;r--)l(t[r],e)},_condense:function(e){for(var t,n=e.length-1;0<=n;n--)0===e[n].children.length?0<n?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():f(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},{quickselect:9}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.valid=n.toPoints=n.toPath=void 0;var r=o(e("./toPath")),i=o(e("./toPoints")),e=o(e("./valid"));function o(e){return e&&e.__esModule?e:{default:e}}n.toPath=r.default,n.toPoints=i.default,n.valid=e.default},{"./toPath":13,"./toPoints":14,"./valid":15}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./toPoints"),o=(r=i)&&r.__esModule?r:{default:r};function s(e){var t="",n=0,r=void 0,i=!0,o=!1,s=void 0;try{for(var a=e[Symbol.iterator]();!(i=(v=a.next()).done);i=!0){var u=v.value,h=u.curve,l=void 0!==h&&h,c=u.moveTo,d=u.x,f=u.y,p=0===n||c,y=n===e.length-1||e[n+1].moveTo,v=0===n?null:e[n-1];if(p)r=u,y||(t+="M"+d+","+f);else if(l){switch(l.type){case"arc":var h=u.curve,m=h.largeArcFlag,c=void 0===m?0:m,p=h.rx,l=h.ry,m=h.sweepFlag,m=void 0===m?0:m,h=h.xAxisRotation;t+="A"+p+","+l+","+(void 0===h?0:h)+","+c+","+m+","+d+","+f;break;case"cubic":m=u.curve;t+="C"+m.x1+","+m.y1+","+m.x2+","+m.y2+","+d+","+f;break;case"quadratic":u=u.curve;t+="Q"+u.x1+","+u.y1+","+d+","+f}y&&d===r.x&&f===r.y&&(t+="Z")}else y&&d===r.x&&f===r.y?t+="Z":d!==v.x&&f!==v.y?t+="L"+d+","+f:d!==v.x?t+="H"+d:f!==v.y&&(t+="V"+f);n++}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return t}n.default=function(e){var t=Array.isArray(e),n=t?Array.isArray(e[0]):"g"===e.type,e=t?e:n?e.shapes.map(function(e){return(0,o.default)(e)}):(0,o.default)(e);return n?e.map(s):s(e)}},{"./toPoints":14}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function i(e){var t=e.type,e=function(e,t){var n,r={};for(n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["type"]);switch(t){case"circle":return o(e);case"ellipse":return s(e);case"line":return a(e);case"path":return u(e);case"polygon":return h(e);case"polyline":return l(e);case"rect":return d(e);case"g":return y(e);default:throw new Error("Not a valid shape type")}}var o=function(e){var t=e.cx,n=e.cy,e=e.r;return[{x:t,y:n-e,moveTo:!0},{x:t,y:n+e,curve:{type:"arc",rx:e,ry:e,sweepFlag:1}},{x:t,y:n-e,curve:{type:"arc",rx:e,ry:e,sweepFlag:1}}]},s=function(e){var t=e.cx,n=e.cy,r=e.rx,e=e.ry;return[{x:t,y:n-e,moveTo:!0},{x:t,y:n+e,curve:{type:"arc",rx:r,ry:e,sweepFlag:1}},{x:t,y:n-e,curve:{type:"arc",rx:r,ry:e,sweepFlag:1}}]},a=function(e){var t=e.x1,n=e.x2;return[{x:t,y:e.y1,moveTo:!0},{x:n,y:e.y2}]},A=/[MmLlHhVvCcSsQqTtAaZz]/g,C={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},k=["a","c","h","l","m","q","s","t","v"],T=["xAxisRotation","largeArcFlag","sweepFlag"],u=function(e){for(var e=e.d,t=e.match(A),n=e.split(A).map(function(e){return e.replace(/[0-9]+-/g,function(e){return e.slice(0,-1)+" -"})}).map(function(e){return e.replace(/\.[0-9]+/g,function(e){return e+" "})}).map(function(e){return e.trim()}).filter(function(e){return 0<e.length}).map(function(e){return e.split(/[ ,]+/).map(parseFloat).filter(function(e){return!isNaN(e)})}),r=[],i=void 0,o=0,s=t.length;o<s;o++){var a=t[o],u=a.toUpperCase(),h=C[u],l=(a=a,-1!==k.indexOf(a));if(0<h)for(var c=n.shift(),d=c.length/h,f=0;f<d;f++){var p=r[r.length-1]||{x:0,y:0};switch(u){case"M":var y=(l?p.x:0)+c.shift(),v=(l?p.y:0)+c.shift();0===f?(i={x:y,y:v},r.push({x:y,y:v,moveTo:!0})):r.push({x:y,y:v});break;case"L":r.push({x:(l?p.x:0)+c.shift(),y:(l?p.y:0)+c.shift()});break;case"H":r.push({x:(l?p.x:0)+c.shift(),y:p.y});break;case"V":r.push({x:p.x,y:(l?p.y:0)+c.shift()});break;case"A":r.push({curve:{type:"arc",rx:c.shift(),ry:c.shift(),xAxisRotation:c.shift(),largeArcFlag:c.shift(),sweepFlag:c.shift()},x:(l?p.x:0)+c.shift(),y:(l?p.y:0)+c.shift()});var m=!0,g=!1,b=void 0;try{for(var _=T[Symbol.iterator]();!(m=(w=_.next()).done);m=!0){var w=w.value;0===r[r.length-1].curve[w]&&delete r[r.length-1].curve[w]}}catch(e){g=!0,b=e}finally{try{!m&&_.return&&_.return()}finally{if(g)throw b}}break;case"C":r.push({curve:{type:"cubic",x1:(l?p.x:0)+c.shift(),y1:(l?p.y:0)+c.shift(),x2:(l?p.x:0)+c.shift(),y2:(l?p.y:0)+c.shift()},x:(l?p.x:0)+c.shift(),y:(l?p.y:0)+c.shift()});break;case"S":var M=(l?p.x:0)+c.shift(),x=(l?p.y:0)+c.shift(),E=(l?p.x:0)+c.shift(),S=(l?p.y:0)+c.shift(),v={},I=void 0,N=void 0,N=p.curve&&"cubic"===p.curve.type?(v.x=Math.abs(p.x-p.curve.x2),v.y=Math.abs(p.y-p.curve.y2),I=p.x<p.curve.x2?p.x-v.x:p.x+v.x,p.y<p.curve.y2?p.y-v.y:p.y+v.y):(v.x=Math.abs(E-M),v.y=Math.abs(S-x),I=p.x,p.y);r.push({curve:{type:"cubic",x1:I,y1:N,x2:M,y2:x},x:E,y:S});break;case"Q":r.push({curve:{type:"quadratic",x1:(l?p.x:0)+c.shift(),y1:(l?p.y:0)+c.shift()},x:(l?p.x:0)+c.shift(),y:(l?p.y:0)+c.shift()});break;case"T":I=(l?p.x:0)+c.shift(),N=(l?p.y:0)+c.shift(),M=void 0,x=void 0;x=p.curve&&"quadratic"===p.curve.type?(E=Math.abs(p.x-p.curve.x1),S=Math.abs(p.y-p.curve.y1),M=p.x<p.curve.x1?p.x-E:p.x+E,p.y<p.curve.y1?p.y-S:p.y+S):(M=p.x,p.y),r.push({curve:{type:"quadratic",x1:M,y1:x},x:I,y:N})}}else{h=r[r.length-1]||{x:0,y:0};h.x===i.x&&h.y===i.y||r.push({x:i.x,y:i.y})}}return r},h=function(e){e=e.points;return c({closed:!0,points:e})},l=function(e){e=e.points;return c({closed:!1,points:e})},c=function(e){var t=e.closed,e=e.points.split(/[\s,]+/).map(function(e){return parseFloat(e)}).reduce(function(e,t,n){return n%2==0?e.push({x:t}):e[(n-1)/2].y=t,e},[]);return t&&e.push(r({},e[0])),e[0].moveTo=!0,e},d=function(e){var t=e.height,n=e.rx,r=e.ry,i=e.width,o=e.x,e=e.y;return n||r?p({height:t,rx:n||r,ry:r||n,width:i,x:o,y:e}):f({height:t,width:i,x:o,y:e})},f=function(e){var t=e.height,n=e.width,r=e.x,e=e.y;return[{x:r,y:e,moveTo:!0},{x:r+n,y:e},{x:r+n,y:e+t},{x:r,y:e+t},{x:r,y:e}]},p=function(e){var t=e.height,n=e.rx,r=e.ry,i=e.width,o=e.x,s=e.y,e={type:"arc",rx:n,ry:r,sweepFlag:1};return[{x:o+n,y:s,moveTo:!0},{x:o+i-n,y:s},{x:o+i,y:s+r,curve:e},{x:o+i,y:s+t-r},{x:o+i-n,y:s+t,curve:e},{x:o+n,y:s+t},{x:o,y:s+t-r,curve:e},{x:o,y:s+r},{x:o+n,y:s,curve:e}]},y=function(e){return e.shapes.map(i)};n.default=i},{}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function r(i){var e=a(i),o=[];if(e.map(function(e){var t=e.match,n=e.prop,r=e.required,e=e.type;void 0===i[n]?r&&o.push(n+" prop is required"+("type"===n?"":" on a "+i.type)):(void 0!==e&&("array"===e?Array.isArray(i[n])||o.push(n+" prop must be of type array"):s(i[n])!==e&&o.push(n+" prop must be of type "+e)),Array.isArray(t)&&-1===t.indexOf(i[n])&&o.push(n+" prop must be one of "+t.join(", ")))}),"g"===i.type&&Array.isArray(i.shapes)){e=i.shapes.map(r);return[].concat.apply(o,e)}return o}var s="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},a=function(e){var t=[{match:["circle","ellipse","line","path","polygon","polyline","rect","g"],prop:"type",required:!0,type:"string"}];switch(e.type){case"circle":t.push({prop:"cx",required:!0,type:"number"}),t.push({prop:"cy",required:!0,type:"number"}),t.push({prop:"r",required:!0,type:"number"});break;case"ellipse":t.push({prop:"cx",required:!0,type:"number"}),t.push({prop:"cy",required:!0,type:"number"}),t.push({prop:"rx",required:!0,type:"number"}),t.push({prop:"ry",required:!0,type:"number"});break;case"line":t.push({prop:"x1",required:!0,type:"number"}),t.push({prop:"x2",required:!0,type:"number"}),t.push({prop:"y1",required:!0,type:"number"}),t.push({prop:"y2",required:!0,type:"number"});break;case"path":t.push({prop:"d",required:!0,type:"string"});break;case"polygon":case"polyline":t.push({prop:"points",required:!0,type:"string"});break;case"rect":t.push({prop:"height",required:!0,type:"number"}),t.push({prop:"rx",type:"number"}),t.push({prop:"ry",type:"number"}),t.push({prop:"width",required:!0,type:"number"}),t.push({prop:"x",required:!0,type:"number"}),t.push({prop:"y",required:!0,type:"number"});break;case"g":t.push({prop:"shapes",required:!0,type:"array"})}return t};n.default=function(e){e=r(e);return{errors:e,valid:0===e.length}}},{}],16:[function(e,t,n){function r(e,t){if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||i,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function i(e,t){return e<t?-1:t<e?1:0}t.exports=r,(t.exports.default=r).prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];0<e;){var i=e-1>>1,o=t[i];if(0<=n(r,o))break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),s=o+1,a=t[o];if(s<this.length&&n(t[s],a)<0&&(a=t[o=s]),0<=n(a,i))break;t[e]=a,e=o}t[e]=i}}},{}],17:[function(e,a,t){!function e(t,n,r){var i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(!(this instanceof o))return new o(e,t);i(e)?(t=e[1],e=e[0]):"object"===_typeof2(e)&&e&&(t=e.y,e=e.x),this.x=o.clean(e||0),this.y=o.clean(t||0)}o.prototype={change:function(e){if("function"==typeof e)this.observers?this.observers.push(e):this.observers=[e];else if(this.observers&&this.observers.length)for(var t=this.observers.length-1;0<=t;t--)this.observers[t](this,e);return this},ignore:function(e){if(this.observers)if(e)for(var t=this.observers,n=t.length;n--;)t[n]===e&&t.splice(n,1);else this.observers=[];return this},set:function(e,t,n){if("number"!=typeof e&&(n=t,t=e.y,e=e.x),this.x===e&&this.y===t)return this;var r=null;return!1!==n&&this.observers&&this.observers.length&&(r=this.clone()),this.x=o.clean(e),this.y=o.clean(t),!1!==n?this.change(r):void 0},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(e){return e?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(e,t,n){return"number"!=typeof e&&(n=t,e=i(e)?(t=e[1],e[0]):(t=e.y,e.x)),e+=this.x,t+=this.y,n?new this.constructor(e,t):this.set(e,t)},subtract:function(e,t,n){return"number"!=typeof e&&(n=t,e=i(e)?(t=e[1],e[0]):(t=e.y,e.x)),e=this.x-e,t=this.y-t,n?new this.constructor(e,t):this.set(e,t)},multiply:function(e,t,n){return"number"!=typeof e?(n=t,e=i(e)?(t=e[1],e[0]):(t=e.y,e.x)):"number"!=typeof t&&(n=t,t=e),e*=this.x,t*=this.y,n?new this.constructor(e,t):this.set(e,t)},rotate:function(e,t,n){var r=this.x,i=this.y,o=Math.cos(e),s=Math.sin(e),e=o*r-(t=t?-1:1)*s*i,i=t*s*r+o*i;return n?new this.constructor(e,i):this.set(e,i)},length:function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},lengthSquared:function(){var e=this.x,t=this.y;return e*e+t*t},distance:function(e){var t=this.x-e.x,e=this.y-e.y;return Math.sqrt(t*t+e*e)},nearest:function(e){for(var t,n=Number.MAX_VALUE,r=null,i=e.length-1;0<=i;i--)(t=this.distance(e[i]))<=n&&(n=t,r=e[i]);return r},normalize:function(e){var t=this.length(),t=t<Number.MIN_VALUE?0:1/t;return e?new this.constructor(this.x*t,this.y*t):this.set(this.x*t,this.y*t)},equal:function(e,t){return"number"!=typeof e&&(e=i(e)?(t=e[1],e[0]):(t=e.y,e.x)),o.clean(e)===this.x&&o.clean(t)===this.y},abs:function(e){var t=Math.abs(this.x),n=Math.abs(this.y);return e?new this.constructor(t,n):this.set(t,n)},min:function(e,t){var n=this.x,r=this.y,i=e.x,e=e.y,i=n<i?n:i,e=r<e?r:e;return t?new this.constructor(i,e):this.set(i,e)},max:function(e,t){var n=this.x,r=this.y,i=e.x,e=e.y,i=i<n?n:i,e=e<r?r:e;return t?new this.constructor(i,e):this.set(i,e)},clamp:function(e,t,n){e=this.min(t,!0).max(e);return n?e:this.set(e.x,e.y)},lerp:function(e,t,n){return this.add(e.subtract(this,!0).multiply(t),n)},skew:function(e){return e?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(e){return o.clean(this.x*e.x+e.y*this.y)},perpDot:function(e){return o.clean(this.x*e.y-this.y*e.x)},angleTo:function(e){return Math.atan2(this.perpDot(e),this.dot(e))},divide:function(e,t,n){if("number"!=typeof e?(n=t,e=i(e)?(t=e[1],e[0]):(t=e.y,e.x)):"number"!=typeof t&&(n=t,t=e),0===e||0===t)throw new Error("division by zero");if(isNaN(e)||isNaN(t))throw new Error("NaN detected");return n?new this.constructor(this.x/e,this.y/t):this.set(this.x/e,this.y/t)},isPointOnLine:function(e,t){return(e.y-this.y)*(e.x-t.x)==(e.y-t.y)*(e.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(e){return this.set(e[0],e[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:o},o.fromArray=function(e,t){return new(t||o)(e[0],e[1])},o.precision=n||8;var s=Math.pow(10,o.precision);return o.clean=t||function(e){if(isNaN(e))throw new Error("NaN detected");if(!isFinite(e))throw new Error("Infinity detected");return Math.round(e)===e?e:Math.round(e*s)/s},o.inject=e,t||(o.fast=e(function(e){return e}),void 0!==a&&"object"==_typeof2(a.exports)?a.exports=o:window.Vec2=window.Vec2||o),o}()},{}],18:[function(e,t,n){function r(){if(r.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(r.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}function i(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function o(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}var s,a;s=this,a=new r,r.prototype.enable=function(h,e){return this.enabled?void 0:this.supported?void navigator.requestMIDIAccess({sysex:e}).then(function(e){function t(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof h&&h.call(this),r.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}var n,r=[],i=[];this.interface=e,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){r.push(e)};for(var o=e.inputs.values(),s=o.next();s&&!s.done;s=o.next())i.push(s.value.open());for(var a=e.outputs.values(),u=a.next();u&&!u.done;u=a.next())i.push(u.value.open());n=setTimeout(t.bind(this),200),Promise&&Promise.all(i).catch(function(e){}).then(t.bind(this))}.bind(this),function(e){"function"==typeof h&&h.call(this,e)}.bind(this)):void("function"==typeof h&&h(new Error("The Web MIDI API is not supported by your browser.")))},r.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._resetInterfaceUserHandlers()},r.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},r.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},r.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(e))if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},r.prototype.toMIDIChannels=function(e){e="all"===e||void 0===e?["all"]:Array.isArray(e)?e:[e];return-1<e.indexOf("all")&&(e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),e.map(function(e){return parseInt(e)}).filter(function(e){return 1<=e&&e<=16})},r.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},r.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},r.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},r.prototype.getOctave=function(e){return null!=e&&0<=e&&e<=127?Math.floor(Math.floor(e)/12-1)+Math.floor(a.octaveOffset):void 0},r.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},r.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&0<=e&&e<=127?t=Math.round(e):0<=parseInt(e)&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},r.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");e=a._semitones[t[1].toUpperCase()],e=12*(parseInt(t[3])+1-Math.floor(a.octaveOffset))+e;if(-1<t[2].toLowerCase().indexOf("b")?e-=t[2].length:-1<t[2].toLowerCase().indexOf("#")&&(e+=t[2].length),e<0||127<e)throw new RangeError("Invalid note name or note outside valid range.");return e},r.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},r.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._inputs[e]._midiInput===r.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(new i(e))}.bind(this))},r.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(new o(e))}.bind(this))},r.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach(function(e){e(t)})},r.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},i.prototype.on=i.prototype.addListener=function(t,e,n){var r=this;if(void 0===e&&(e="all"),Array.isArray(e)||(e=[e]),e.forEach(function(e){if("all"!==e&&!(1<=e&&e<=16))throw new RangeError("The 'channel' parameter is invalid.")}),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==a.MIDI_SYSTEM_MESSAGES[t])this._userHandlers.system[t]||(this._userHandlers.system[t]=[]),this._userHandlers.system[t].push(n);else{if(void 0===a.MIDI_CHANNEL_MESSAGES[t])throw new TypeError("The specified event type is not supported.");if(-1<e.indexOf("all")){e=[];for(var i=1;i<=16;i++)e.push(i)}this._userHandlers.channel[t]||(this._userHandlers.channel[t]=[]),e.forEach(function(e){r._userHandlers.channel[t][e]||(r._userHandlers.channel[t][e]=[]),r._userHandlers.channel[t][e].push(n)})}return this},i.prototype.hasListener=function(t,e,n){var r=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===e&&(e="all"),e.constructor!==Array&&(e=[e]),void 0!==a.MIDI_SYSTEM_MESSAGES[t]){for(var i=0;i<this._userHandlers.system[t].length;i++)if(this._userHandlers.system[t][i]===n)return!0}else if(void 0!==a.MIDI_CHANNEL_MESSAGES[t]){if(-1<e.indexOf("all")){e=[];for(var o=1;o<=16;o++)e.push(o)}return!!this._userHandlers.channel[t]&&e.every(function(e){e=r._userHandlers.channel[t][e];return e&&-1<e.indexOf(n)})}return!1},i.prototype.removeListener=function(r,e,i){var o=this;if(void 0!==i&&"function"!=typeof i)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===e&&(e="all"),e.constructor!==Array&&(e=[e]),void 0!==a.MIDI_SYSTEM_MESSAGES[r])if(void 0===i)this._userHandlers.system[r]=[];else for(var t=0;t<this._userHandlers.system[r].length;t++)this._userHandlers.system[r][t]===i&&this._userHandlers.system[r].splice(t,1);else if(void 0!==a.MIDI_CHANNEL_MESSAGES[r]){if(-1<e.indexOf("all")){e=[];for(var n=1;n<=16;n++)e.push(n)}if(!this._userHandlers.channel[r])return this;e.forEach(function(e){var t=o._userHandlers.channel[r][e];if(t)if(void 0===i)o._userHandlers.channel[r][e]=[];else for(var n=0;n<t.length;n++)t[n]===i&&t.splice(n,1)})}else{if(void 0!==r)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},i.prototype._initializeUserHandlers=function(){for(var e in a.MIDI_CHANNEL_MESSAGES)a.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in a.MIDI_SYSTEM_MESSAGES)a.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},i.prototype._onMidiMessage=function(e){var t;0<this._userHandlers.system.midimessage.length&&(t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"},this._userHandlers.system.midimessage.forEach(function(e){e(t)})),e.data[0]<240?this._parseChannelEvent(e):e.data[0]<=255&&this._parseSystemEvent(e)},i.prototype._parseChannelEvent=function(e){var t,n,r=e.data[0]>>4,i=1+(15&e.data[0]);1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0);var o={target:this,data:e.data,timestamp:e.timeStamp,channel:i};r===a.MIDI_CHANNEL_MESSAGES.noteoff||r===a.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(o.type="noteoff",o.note={number:t,name:a._notes[t%12],octave:a.getOctave(t)},o.velocity=n/127,o.rawVelocity=n):r===a.MIDI_CHANNEL_MESSAGES.noteon?(o.type="noteon",o.note={number:t,name:a._notes[t%12],octave:a.getOctave(t)},o.velocity=n/127,o.rawVelocity=n):r===a.MIDI_CHANNEL_MESSAGES.keyaftertouch?(o.type="keyaftertouch",o.note={number:t,name:a._notes[t%12],octave:a.getOctave(t)},o.value=n/127):r===a.MIDI_CHANNEL_MESSAGES.controlchange&&0<=t&&t<=119?(o.type="controlchange",o.controller={number:t,name:this.getCcNameByNumber(t)},o.value=n):r===a.MIDI_CHANNEL_MESSAGES.channelmode&&120<=t&&t<=127?(o.type="channelmode",o.controller={number:t,name:this.getChannelModeByNumber(t)},o.value=n):r===a.MIDI_CHANNEL_MESSAGES.programchange?(o.type="programchange",o.value=t):r===a.MIDI_CHANNEL_MESSAGES.channelaftertouch?(o.type="channelaftertouch",o.value=t/127):r===a.MIDI_CHANNEL_MESSAGES.pitchbend?(o.type="pitchbend",o.value=((n<<7)+t-8192)/8192):o.type="unknownchannelmessage",this._userHandlers.channel[o.type]&&this._userHandlers.channel[o.type][i]&&this._userHandlers.channel[o.type][i].forEach(function(e){e(o)})},i.prototype.getCcNameByNumber=function(e){if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var t in a.MIDI_CONTROL_CHANGE_MESSAGES)if(a.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===a.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},i.prototype.getChannelModeByNumber=function(e){if(!(120<=(e=Math.floor(e))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in a.MIDI_CHANNEL_MODE_MESSAGES)if(a.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===a.MIDI_CHANNEL_MODE_MESSAGES[t])return t},i.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===a.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===a.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===a.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===a.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):t===a.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":t===a.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":t===a.MIDI_SYSTEM_MESSAGES.start?n.type="start":t===a.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":t===a.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":t===a.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":t===a.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach(function(e){e(n)})},o.prototype.send=function(e,t,n){if(!(128<=e&&e<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(e,t){e=Math.floor(e);if(!(0<=e&&e<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(e)}),this._midiOutput.send([e].concat(r),parseFloat(n)||0),this},o.prototype.sendSysex=function(e,t,n){if(!a.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach(function(e){if(e<0||127<e)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),t=e.concat(t,a.MIDI_SYSTEM_MESSAGES.sysexend),this.send(a.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},o.prototype.sendTimecodeQuarterFrame=function(e,t){return t=t||{},this.send(a.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter(t.time)),this},o.prototype.sendSongPosition=function(e,t){t=t||{};var n=(e=Math.floor(e)||0)>>7&127,e=127&e;return this.send(a.MIDI_SYSTEM_MESSAGES.songposition,[n,e],this._parseTimeParameter(t.time)),this},o.prototype.sendSongSelect=function(e,t){if(t=t||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(a.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},o.prototype.sendTuningRequest=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendClock=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendStart=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendContinue=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendStop=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendActiveSensing=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(e.time)),this},o.prototype.sendReset=function(e){return e=e||{},this.send(a.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(e.time)),this},o.prototype.stopNote=function(e,n,r){if("all"===e)return this.sendChannelMode("allnotesoff",0,n,r);var i=64;return(r=r||{}).rawVelocity?!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=127&&(i=r.velocity):!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=1&&(i=127*r.velocity),this._convertNoteToArray(e).forEach(function(t){a.toMIDIChannels(n).forEach(function(e){this.send((a.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(e-1),[t,Math.round(i)],this._parseTimeParameter(r.time))}.bind(this))}.bind(this)),this},o.prototype.playNote=function(e,n,r){var i,o=64;return(r=r||{}).rawVelocity?!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=127&&(o=r.velocity):!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=1&&(o=127*r.velocity),r.time=this._parseTimeParameter(r.time),this._convertNoteToArray(e).forEach(function(t){a.toMIDIChannels(n).forEach(function(e){this.send((a.MIDI_CHANNEL_MESSAGES.noteon<<4)+(e-1),[t,Math.round(o)],r.time)}.bind(this))}.bind(this)),isNaN(r.duration)||(r.duration<=0&&(r.duration=0),i=64,r.rawVelocity?!isNaN(r.release)&&0<=r.release&&r.release<=127&&(i=r.release):!isNaN(r.release)&&0<=r.release&&r.release<=1&&(i=127*r.release),this._convertNoteToArray(e).forEach(function(t){a.toMIDIChannels(n).forEach(function(e){this.send((a.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(e-1),[t,Math.round(i)],(r.time||a.time)+r.duration)}.bind(this))}.bind(this))),this},o.prototype.sendKeyAftertouch=function(e,n,t,r){var i=this;if(r=r||{},n<1||16<n)throw new RangeError("The channel must be between 1 and 16.");(isNaN(t)||t<0||1<t)&&(t=.5);var o=Math.round(127*t);return this._convertNoteToArray(e).forEach(function(t){a.toMIDIChannels(n).forEach(function(e){i.send((a.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(e-1),[t,o],i._parseTimeParameter(r.time))})}),this},o.prototype.sendControlChange=function(t,n,e,r){if(r=r||{},"string"==typeof t){if(!(t=a.MIDI_CONTROL_CHANGE_MESSAGES[t]))throw new TypeError("Invalid controller name.")}else if(!(0<=(t=Math.floor(t))&&t<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(n=Math.floor(n)||0)&&n<=127))throw new RangeError("Controller value must be between 0 and 127.");return a.toMIDIChannels(e).forEach(function(e){this.send((a.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(e-1),[t,n],this._parseTimeParameter(r.time))}.bind(this)),this},o.prototype._selectRegisteredParameter=function(t,n,r){var i=this;if(t[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(t[1]=Math.floor(t[1]),!(0<=t[1]&&t[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return a.toMIDIChannels(n).forEach(function(e){i.sendControlChange(101,t[0],n,{time:r}),i.sendControlChange(100,t[1],n,{time:r})}),this},o.prototype._selectNonRegisteredParameter=function(t,n,r){var i=this;if(t[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(t[1]=Math.floor(t[1]),!(0<=t[1]&&t[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return a.toMIDIChannels(n).forEach(function(e){i.sendControlChange(99,t[0],n,{time:r}),i.sendControlChange(98,t[1],n,{time:r})}),this},o.prototype._setCurrentRegisteredParameter=function(t,n,r){var i=this;if((t=[].concat(t))[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return a.toMIDIChannels(n).forEach(function(e){i.sendControlChange(6,t[0],n,{time:r})}),t[1]=Math.floor(t[1]),0<=t[1]&&t[1]<=127&&a.toMIDIChannels(n).forEach(function(e){i.sendControlChange(38,t[1],n,{time:r})}),this},o.prototype._deselectRegisteredParameter=function(t,n){var r=this;return a.toMIDIChannels(t).forEach(function(e){r.sendControlChange(101,127,t,{time:n}),r.sendControlChange(100,127,t,{time:n})}),this},o.prototype.setRegisteredParameter=function(t,n,r,i){var o=this;if(i=i||{},!Array.isArray(t)){if(!a.MIDI_REGISTERED_PARAMETER[t])throw new Error("The specified parameter is not available.");t=a.MIDI_REGISTERED_PARAMETER[t]}return a.toMIDIChannels(r).forEach(function(e){o._selectRegisteredParameter(t,r,i.time),o._setCurrentRegisteredParameter(n,r,i.time),o._deselectRegisteredParameter(r,i.time)}),this},o.prototype.setNonRegisteredParameter=function(t,n,r,i){var o=this;if(i=i||{},!(0<=t[0]&&t[0]<=127&&0<=t[1]&&t[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return n=[].concat(n),a.toMIDIChannels(r).forEach(function(e){o._selectNonRegisteredParameter(t,r,i.time),o._setCurrentRegisteredParameter(n,r,i.time),o._deselectRegisteredParameter(r,i.time)}),this},o.prototype.incrementRegisteredParameter=function(t,n,r){var i=this;if(r=r||{},!Array.isArray(t)){if(!a.MIDI_REGISTERED_PARAMETER[t])throw new Error("The specified parameter is not available.");t=a.MIDI_REGISTERED_PARAMETER[t]}return a.toMIDIChannels(n).forEach(function(e){i._selectRegisteredParameter(t,n,r.time),i.sendControlChange(96,0,n,{time:r.time}),i._deselectRegisteredParameter(n,r.time)}),this},o.prototype.decrementRegisteredParameter=function(t,n,r){if(r=r||{},!Array.isArray(t)){if(!a.MIDI_REGISTERED_PARAMETER[t])throw new TypeError("The specified parameter is not available.");t=a.MIDI_REGISTERED_PARAMETER[t]}return a.toMIDIChannels(n).forEach(function(e){this._selectRegisteredParameter(t,n,r.time),this.sendControlChange(97,0,n,{time:r.time}),this._deselectRegisteredParameter(n,r.time)}.bind(this)),this},o.prototype.setPitchBendRange=function(t,n,r,i){var o=this;if(i=i||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(n=Math.floor(n)||0)&&n<=127))throw new RangeError("The cents value must be between 0 and 127");return a.toMIDIChannels(r).forEach(function(e){o.setRegisteredParameter("pitchbendrange",[t,n],r,{time:i.time})}),this},o.prototype.setModulationRange=function(t,n,r,i){var o=this;if(i=i||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(n=Math.floor(n)||0)&&n<=127))throw new RangeError("The cents value must be between 0 and 127");return a.toMIDIChannels(r).forEach(function(e){o.setRegisteredParameter("modulationrange",[t,n],r,{time:i.time})}),this},o.prototype.setMasterTuning=function(e,t,n){var r=this;if(n=n||{},(e=parseFloat(e)||0)<=-65||64<=e)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var i=Math.floor(e)+64,e=e-Math.floor(e),o=(e=Math.round((1+e)/2*16383))>>7&127,s=127&e;return a.toMIDIChannels(t).forEach(function(e){r.setRegisteredParameter("channelcoarsetuning",i,t,{time:n.time}),r.setRegisteredParameter("channelfinetuning",[o,s],t,{time:n.time})}),this},o.prototype.setTuningProgram=function(t,n,r){var i=this;if(r=r||{},!(0<=(t=Math.floor(t))&&t<=127))throw new RangeError("The program value must be between 0 and 127");return a.toMIDIChannels(n).forEach(function(e){i.setRegisteredParameter("tuningprogram",t,n,{time:r.time})}),this},o.prototype.setTuningBank=function(t,n,r){var i=this;if(r=r||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The bank value must be between 0 and 127");return a.toMIDIChannels(n).forEach(function(e){i.setRegisteredParameter("tuningbank",t,n,{time:r.time})}),this},o.prototype.sendChannelMode=function(t,n,e,r){if(r=r||{},"string"==typeof t){if(!(t=a.MIDI_CHANNEL_MODE_MESSAGES[t]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(t=Math.floor(t))&&t<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((n=Math.floor(n)||0)<0||127<n)throw new RangeError("Value must be an integer between 0 and 127.");return a.toMIDIChannels(e).forEach(function(e){this.send((a.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(e-1),[t,n],this._parseTimeParameter(r.time))}.bind(this)),this},o.prototype.sendProgramChange=function(t,e,n){var r=this;if(n=n||{},t=Math.floor(t),isNaN(t)||t<0||127<t)throw new RangeError("Program numbers must be between 0 and 127.");return a.toMIDIChannels(e).forEach(function(e){r.send((a.MIDI_CHANNEL_MESSAGES.programchange<<4)+(e-1),[t],r._parseTimeParameter(n.time))}),this},o.prototype.sendChannelAftertouch=function(e,t,n){var r=this;n=n||{},e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=.5);var i=Math.round(127*e);return a.toMIDIChannels(t).forEach(function(e){r.send((a.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(e-1),[i],r._parseTimeParameter(n.time))}),this},o.prototype.sendPitchBend=function(e,t,n){var r=this;if(n=n||{},isNaN(e)||e<-1||1<e)throw new RangeError("Pitch bend value must be between -1 and 1.");var e=Math.round((e+1)/2*16383),i=e>>7&127,o=127&e;return a.toMIDIChannels(t).forEach(function(e){r.send((a.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(e-1),[o,i],r._parseTimeParameter(n.time))}),this},o.prototype._parseTimeParameter=function(e){var t,n;return"string"==typeof e&&"+"===e.substring(0,1)?(t=parseFloat(e))&&0<t&&(n=a.time+t):(t=parseFloat(e))>a.time&&(n=t),n},o.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach(function(e){t.push(a.guessNoteNumber(e))}),t},"function"==typeof define&&"object"==_typeof2(define.amd)?define([],function(){return a}):void 0!==t&&t.exports?t.exports=a:s.WebMidi||(s.WebMidi=a)},{}],19:[function(e,t,n){t.exports={MinDistance:1,MaxDistance:5,RepulsionRadius:10,AttractionForce:.2,RepulsionForce:.6,AlignmentForce:.55,NodeInjectionInterval:100,DrawNodes:!1,TraceMode:!0,InvertedColors:!0,DebugMode:!1,FillMode:!1}},{}],20:[function(e,t,n){var d,f=e("../../../core/Node"),p=e("../../../core/Path"),i=e("../../../core/World"),y=e("./Settings"),o=e("../../../core/MIDIControl"),s=4;new p5(function(c){function e(e,t,n,r,i,o){for(var s=r*t,a=n*e,u=0;u<e;u++)for(var h=0;h<t;h++){var l=[];l.push(new f(c,h*r+window.innerWidth/2-s/2,u*n+window.innerHeight/2-a/2+n/2,y)),l.push(new f(c,h*r+window.innerWidth/2+i-s/2,u*n+window.innerHeight/2+o-a/2+n/2,y)),d.addPath(new p(c,l,y))}}function n(e,t,n,r,i,o,s){for(var a=(r-n)/o,u=i+s,h=n;h<r;h+=a){var l=[];l[0]=new f(c,i*Math.cos(h*(Math.PI/180)),i*Math.sin(h*(Math.PI/180)),y),l[1]=new f(c,u*Math.cos(h*(Math.PI/180)),u*Math.sin(h*(Math.PI/180)),y);l=new p(c,l,y);l.moveTo(e,t),d.addPath(l)}}function r(){switch(d.clearPaths(),s){case 0:e(30,10,20,45,30,0);break;case 1:e(10,30,38,20,0,30);break;case 2:e(15,20,38,20,-30,30);break;case 3:n(window.innerWidth/2,window.innerHeight/2,0,360,75,60,50);break;case 4:n(window.innerWidth/2-450+100,window.innerHeight/2+450-75,270,360,375,66,100),n(window.innerWidth/2+450-100,window.innerHeight/2-450+75,90,180,375,60,100);break;case 5:!function(){for(var e=[{x:-200,y:-210,ds:0,de:360,r:25,lpa:55,ll:100},{x:60,y:-100,ds:0,de:360,r:25,lpa:30,ll:35},{x:-80,y:-20,ds:0,de:360,r:50,lpa:45,ll:25},{x:150,y:150,ds:0,de:360,r:100,lpa:60,ll:70},{x:-40,y:-150,ds:0,de:360,r:15,lpa:18,ll:10},{x:-400,y:400,ds:270,de:360,r:400,lpa:60,ll:30},{x:-400,y:400,ds:270,de:360,r:350,lpa:15,ll:20},{x:-400,y:400,ds:270,de:360,r:300,lpa:7,ll:40},{x:-400,y:400,ds:270,de:360,r:200,lpa:30,ll:75},{x:125,y:-400,ds:0,de:180,r:175,lpa:45,ll:30},{x:275,y:-110,ds:0,de:360,r:75,lpa:45,ll:15}],t=0;t<e.length;t++)n(window.innerWidth/2+e[t].x,window.innerHeight/2+e[t].y,e[t].ds,e[t].de,e[t].r,e[t].lpa,e[t].ll)}()}d.drawBackground(),d.draw(),d.pause(),setTimeout(function(){d.unpause()},1e3)}c.setup=function(){c.createCanvas(window.innerWidth,window.innerHeight),c.colorMode(c.HSB,255),c.rectMode(c.CENTER),d=new i(c,y),r(),this.midi=new o,document.addEventListener("noteon",function(e){console.log(e.detail)}),document.addEventListener("controlchange",function(e){console.log(e.detail)})},c.draw=function(){d.iterate(),d.draw(),function(){c.noFill(),d.invertedColors?c.stroke(255):c.stroke(0);c.rect(window.innerWidth/2,window.innerHeight/2,800,800)}()},c.keyReleased=function(){switch(c.key){case"1":s=0,r();break;case"2":s=1,r();break;case"3":s=2,r();break;case"4":s=3,r();break;case"5":s=4,r();break;case"6":s=5,r();break;case"t":d.toggleTraceMode();break;case"n":d.toggleDrawNodes();break;case"r":r();break;case" ":d.paused=!d.paused;var e,t=0,n=_createForOfIteratorHelper(d.paths);try{for(n.s();!(e=n.n()).done;){t+=e.value.nodes.length}}catch(e){n.e(e)}finally{n.f()}console.log(t);break;case"i":d.toggleInvertedColors();break;case"d":d.toggleDebugMode();break;case"f":d.toggleFillMode();break;case"h":d.toggleDrawHistory();break;case"s":d.export()}}})},{"../../../core/MIDIControl":3,"../../../core/Node":4,"../../../core/Path":5,"../../../core/World":6,"./Settings":19}]},{},[20]);